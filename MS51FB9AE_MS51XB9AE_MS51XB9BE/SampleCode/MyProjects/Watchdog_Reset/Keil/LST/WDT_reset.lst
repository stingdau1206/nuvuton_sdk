C51 COMPILER V9.60.0.0   WDT_RESET                                                         08/23/2022 01:58:57 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE WDT_RESET
OBJECT MODULE PLACED IN .\Output\WDT_reset.obj
COMPILER INVOKED BY: C:\Keil_v5_8051\C51\BIN\C51.EXE ..\WDT_reset.c OPTIMIZE(7,SPEED) BROWSE INCDIR(..\..\..\..\Library\
                    -Device\Include;..\..\..\..\Library\StdDriver\inc) DEBUG OBJECTEXTEND PRINT(.\LST\WDT_reset.lst) TABS(2) OBJECT(.\Output\
                    -WDT_reset.obj)

line level    source

   1          /*--------------------------------------------------------------------------------------------------------
             --*/
   2          /*                                                                                                        
             - */
   3          /* Copyright(c) 2020 nuvoton Technology Corp. All rights reserved.                                        
             - */
   4          /*                                                                                                        
             - */
   5          /*--------------------------------------------------------------------------------------------------------
             --*/
   6          
   7          /*********************************************************************************************************
             -**/
   8          /* Website: http://www.nuvoton.com                                                                        
             - */
   9          /*  E-Mail : MicroC-8bit@nuvoton.com                                                                      
             - */
  10          /*  Date   : June/21/2020                                                                                 
             -  */
  11          /*********************************************************************************************************
             -**/
  12          
  13          /*********************************************************************************************************
             -***/
  14          /*  File Function: MS51 Watchdog reset disable by modify CONFIG setting demo                              
             -  */
  15          /*********************************************************************************************************
             -***/
  16          #include "MS51_16K.H"
  17          
  18          /***********************************************************************
  19          
  20          /*********************************************************************************************************
             -**/
  21          /*    Main function                                                                                       
             - */
  22          /*********************************************************************************************************
             -***/
  23          void main (void)
  24          {
  25   1          unsigned char i;
  26   1          P12_QUASI_MODE;
  27   1          P12 = 1;
  28   1          Disable_WDT_Reset_Config();
  29   1      /*----------------------------------------------------------------------------------------------*/
  30   1      /* WDT Init !!! ENABLE CONFIG WDT FIRST !!!                                                     */
  31   1      /* Warning:                                                                                     */
  32   1      /* Always check CONFIG WDT enable first, CONFIG not enable, SFR can't enable WDT reset          */
  33   1      /* Please call Enable_WDT_Reset_Config() function to enable CONFIG WDT reset                    */
  34   1      /*----------------------------------------------------------------------------------------------*/
  35   1          for(i=0;i<3;i++)
  36   1          {
  37   2           P12=~P12;
C51 COMPILER V9.60.0.0   WDT_RESET                                                         08/23/2022 01:58:57 PAGE 2   

  38   2           Timer0_Delay(16000000,500,1000);
  39   2          }
  40   1      
  41   1          TA=0xAA;TA=0x55;WDCON|=0x07;                //Setting WDT prescale 
  42   1          set_WDCON_WDCLR;                            //Clear WDT timer
  43   1          while((WDCON|~SET_BIT6)==0xFF);             //confirm WDT clear is ok before into power down mode
  44   1      
  45   1          set_WDCON_WDTR;                             //WDT run
  46   1      
  47   1          while (1)
  48   1          {
  49   2            if (P00)
  50   2            {
  51   3               Disable_WDT_Reset_Config();               //Software disable WDT reset CONFIG setting
  52   3                for(i=0;i<5;i++)
  53   3                {
  54   4                  P12=~P12;
  55   4                  Timer0_Delay(16000000,50,1000);
  56   4                }
  57   3            }
  58   2            else 
  59   2            {
  60   3               Enable_WDT_Reset_Config();
  61   3               set_PCON_PD;
  62   3            }
  63   2          }
  64   1      }
  65          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    187    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
